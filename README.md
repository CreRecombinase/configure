# configure

Configure R packages for installation with R.

## Motivation

Writing portable package `configure` scripts is painful. It's even more painful because
you need to do it twice: once for Unix, and once for Windows (with `configure.win`). And
the same tools you might use to write `configure` might not be available when you want to
write `configure.win`. This package seeks to solve that problem by allowing you to
configure your R package with R code.

## Usage

First, prepare your package by invoking:

```r
configure::use_configure()
```

This will write out a few files:

- configure
- configure.win
- R/config/configure.R

The `configure` and `configure.win` scripts ask R to source the `R/config/configure.R`
file. This script configures your package with these steps:

- First, a `config` database is generated by running `R CMD config --all`,
- Next, any R scripts within the `R/config/scripts` are sourced,
- If a function called `configure` is defined by one of those scripts, it is then invoked
  (receiving the `config` database as an argument),
- All `.in` files are then 'configured' -- any instances of `@VAR@` in those files are
  then replaced with the value of `VAR` in the `config` database.

The user-defined `configure()` function above can be used to modify the
`config` database generated by `R CMD config --all` -- for example, for defining new
variable substitutions appropriate for the target platform.

Note that these files are standalone -- the `configure` package need not be present when
your package is configured; the `configure.R` script contains all of the functions
necessary to run.

